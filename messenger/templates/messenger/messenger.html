{% load static %}
<html>

<head>
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">

    <body>
        <!DOCTYPE html>
        <html lang="fr">

        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta http-equiv="X-UA-Compatible" content="ie=edge">
            <title>ValuedSeed - Dashboard</title>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css">
            <script src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/2.3.0/alpine.js" integrity="sha512-nIwdJlD5/vHj23CbO2iHCXtsqzdTTx3e3uAmpTm4x2Y8xCIFyWu4cSIV8GaGe2UNVq86/1h9EgUZy7tn243qdA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        </head>

        <body class="h-screen flex flex-col" x-data="{openEventModal : false, user:'', 'subject':'', contenue: '',messages: null,click_msg: false,data_msg: {{dict|safe}},
    send_mess() {
        

var xhttp=new XMLHttpRequest();

xhttp.open('POST', 'http://127.0.0.1:8000/messenger/api/new', false)

xhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')

xhttp.onreadystatechange = function() {
    if(this.status==200 && this.readyState==4) {
        console.log('OK')
    }
}
//this.data_msg.list.push({id: this.data_msg.list[this.data_msg.list.lenght-1]+1,subject: this.subject, destinataire: this.user,author: '{{request.user.username}}', message_list: [] })
xhttp.send(`user=${this.user}&object=${this.subject}&contenue=${this.contenue}`)


    }, show_mess() {
        this.click_msg=true
}}">
            <header class="flex flex-shrink-0">
                <div class="w-64 flex-shrink-0 px-4 py-3 bg-gray-800">
                    <button class=" w-full flex items-center">
        <img 
        class="h-8 w-8 rounded-full object-cover" 
        src="{{obj1.img_profil.url}}">
        <span class="ml-4 mr-2 text-sm font-medium text-white">{{user.username}}</span>
        
      </button>
                </div>
                <div class="flex-1 flex items-center px-6 justify-between bg-gray-700">
                    <nav class="flex">
                        <a href="#" class="ml-2 text-sm px-3 py-2 leading-none rounded-lg inline-block font-medium text-white hover:bg-gray-600 bg-gray-800">home</a>
                        <a href="#" class="ml-2 text-sm px-3 py-2 leading-none rounded-lg inline-block font-medium text-white hover:bg-gray-600">messenger</a>
                        <a href="#" class="ml-2 text-sm px-3 py-2 leading-none rounded-lg inline-block font-medium text-white hover:bg-gray-600">todolist</a>
                        <a href="#" class="ml-2 text-sm px-3 py-2 leading-none rounded-lg inline-block font-medium text-white hover:bg-gray-600">forum</a>
                        <a href="#" class="ml-2 text-sm px-3 py-2 leading-none rounded-lg inline-block font-medium text-white hover:bg-gray-600">blog</a>

                    </nav>
                    <div class="flex">
                        <div class="relative py-1">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-2">
              <svg class="h-5 w-5 fill-current text-gray-500" viewBox="0 0 24 24">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M10 2a8 8 0 100 16 8 8 0 000-16zM0 10C0 4.477 4.477 0 10 0s10 4.477 10 10-4.477 10-10 10S0 15.523 0 10z"
                />
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M16.293 16.293a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414l-6-6a1 1 0 010-1.414z" />
              </svg>
            </span>
                            <input class="block pl-10 pr-4 py-2 w-64 bg-gray-900 rounded-lg text-sm placeholder-gray-400 text-white focus:bg-white focus:placeholder-gray-700 focus:text-gray-900 focus:outline-none" placeholder="Search">
                        </div>
                        <button class="ml-5 text-gray-400 hover:text-gray-200">
            <svg class="h-5 w-5 fill-current" viewBox="0 0 24 24">
              <path
                d="M8 0a2 2 0 00-2 2v.341C3.67 3.165 2 5.388 2 8v5H1a1 1 0 100 2h14a1 1 0 100-2h-1V8a6.002 6.002 0 00-4-5.659V2a2 2 0 00-2-2zM8 18a2 2 0 01-2-2h4a2 2 0 01-2 2z"
                 />
              </svg>
          </button>
                        <button class="ml-5 text-gray-400 hover:text-gray-200">
            <svg class="h-5 w-5 fill-current" viewBox="0 0 24 24">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm-1.086-8.724c-.084.56.392 1.022.958 1.022h.47a.525.525 0 00.524-.492c.057-.526.283-.986.676-1.379l.63-.62c.492-.495.836-.944 1.033-1.347.197-.409.295-.842.295-1.299 0-1.005-.303-1.782-.909-2.33C13.985 6.277 13.133 6 12.035 6c-1.088 0-1.947.29-2.58.871a2.84 2.84 0 00-.793 1.28c-.184.604.36 1.131.99 1.131.534 0 .933-.435 1.304-.84.052-.057.103-.114.154-.168.234-.247.542-.37.925-.37.808 0 1.212.454 1.212 1.362 0 .301-.078.589-.233.863-.155.269-.469.621-.94 1.056-.466.43-.787.869-.964 1.315-.087.221-.152.48-.196.776zm.057 2.611c-.233.231-.35.527-.35.887 0 .355.114.648.342.88.233.23.539.346.917.346s.68-.116.909-.347c.233-.231.35-.524.35-.879 0-.36-.12-.656-.358-.887-.233-.237-.534-.355-.901-.355-.368 0-.671.118-.91.355z"
                 />
            </svg>
          </button>
                    </div>
                </div>
            </header>

            <div class="flex flex-1 overflow-hidden">
                <div class="w-64 p-6 bg-gray-100 overflow-y-auto ">
                    <nav>
                        <h2 class="text-xs font-semibold text-gray-600 uppercase tracking-wider">
                            Mailboxes
                        </h2>

                        <div class="mt-3">
                            <a href="#" class="mt-2 -mx-3 px-3 py-2 flex items-center justify-between text-sm font-medium bg-gray-200 rounded-lg">
                                <span class="inline-flex align-baseline">
              <span class="leading-normal">
              <i class="fas fa-inbox h-5 w-5 fill-current text-gray-700 "></i>
              </span>
                                <span class="ml-2 text-gray-900">Inbox</span>
                                </span>
                                <span class="w-10 text-center py-1 text-xs font-semibold rounded-full text-gray-700 bg-gray-300">
              6
            </span>
                            </a>
                            <a href="#" class="mt-2 -mx-3 px-3 py-2 flex items-center justify-between text-sm font-medium bg-gray-100 hover:bg-gray-200 rounded-lg" @click="openEventModal = ! openEventModal">
                                <span class="inline-flex align-baseline">
              <span class="leading-normal">
              <svg class="h-5 w-5 fill-current text-gray-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
              </svg>
              </span>
                                <span class="ml-2 text-gray-900">new message</span>
                                </span>

                            </a>

                            <a href="#" class="mt-2 -mx-3 px-3 py-2 flex items-center justify-between text-sm font-medium hover:bg-gray-200 rounded-lg">
                                <span class="inline-flex align-baseline">
              <span class="leading-normal">
              <i class="far fa-paper-plane h-5 w-5 fill-current text-gray-500 "></i>



              </span>
                                <span class="ml-2 text-gray-700">send </span>
                                </span>
                            </a>
                            <a href="#" class="mt-2 -mx-3 px-3 py-2 flex items-center justify-between text-sm font-medium hover:bg-gray-200 rounded-lg">
                                <span class="inline-flex align-baseline">
              <span class="leading-normal">
              <i class="far fa-edit h-5 w-5 fill-current text-gray-500 "></i>
              </span>
                                <span class="ml-2 text-gray-700">Drafts</span>
                                </span>
                                <span class="w-10 text-center py-1 text-xs font-semibold rounded-full text-gray-700 bg-gray-300">
              2
            </span>
                            </a>

                        </div>


                    </nav>
                </div>
                {% block 'inbox' %}
                <main class="flex-1 flex bg-gray-200">
                    <div class="relative flex flex-col w-full max-w-xs flex-grow border-l border-r bg-gray-200 h-full">
                        <div class="flex-shrink-0 px-4 py-2 border-b flex items-center justify-between">
                            <button class="flex items-center text-xs font-semibold text-gray-600">
                                Sorted by Date
                                <span class="leading-loose h-6 w-6 stroke-current text-gray-500">
                                    <i class="fas fa-chevron-down ml-1"></i>
                                </span>
                            </button>
                            <button>
                                <span class=" h-6 w-6 stroke-current text-gray-500">
                                    <i class="fas fa-sort-amount-up"></i>
                                </span>
                            </button>
                        </div>
                        <div class="flex-1 overflow-y-auto">
                            <template x-for='i in data_msg.list'>
                            <a href="#" class="block px-6 pt-3 pb-4 bg-white hover:bg-gray-100" @click="messages=i">
                                <div class="flex justify-between">
                                    <span class="text-sm font-semibold text-gray-900" x-text="i.subject"></span> 
                                </div>
                                <p class="text-sm text-gray-900" x-text="i.author"></p>
                            </a>
                            </template>
                            <template x-show="! data_msg.list">
                            <div class="text-center">

                                <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                                  </svg>
                                <h3 class="mt-2 text-sm font-medium text-gray-900">No message</h3>
                                <p class="mt-1 text-sm text-gray-500">
                                    is very sad you don't have messages
                                </p>
                            </div>
                            </template>




                        </div>
                    </div>
                    <template x-if="messages != null">
                    <div class="flex-1 flex flex-col w-0" >
                        <div class="relative shadow-md">
                            <div class="flex items-center px-5 py-4 justify-between bg-gray-100 border-b">
                                <div class="flex items-center">
                                    <a href="#reply">
                                        <span class="leading-normal">
                        <i class="fas fa-reply h-5 w-5 text-2xl fill-current text-gray-600 "></i>
                        </span>
                                    </a>

                                </div>
                            </div>
                            <div class="flex items-center justify-between px-5 py-3 bg-white">
                                <h3 class="text-xl text-gray-900 truncate" x-text="messages.subject"></h3>

                            </div>
                        </div>
                        <div class="p-3 flex-1 overflow-y-auto">
                            <article class="px-10 pt-6 pb-8 bg-white rounded-lg shadow">
                                <div class="flex items-center justify-between">
                                    <p class="text-lg font-semibold">
                                        <span class="text-gray-900">Masturah Adam</span>
                                        <span class="text-gray-600">wrote</span>
                                    </p>
                                    <div class="flex items-center">
                                        <span class="text-xs text-gray-600">Yesterday at 7:24 AM</span>
                                        <img class="ml-5 h-8 w-8 rounded-full object-cover" src="https://images.unsplash.com/photo-1463453091185-61582044d556?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=3.5&w=144&q=60">
                                    </div>
                                </div>
                                <div class="mt-6 text-gray-800 text-sm">
                                    <p>Thanks so much!! Can't wait to try it out :)</p>
                                </div>
                            </article>
                            <article class="mt-3 px-10 pt-6 pb-8 bg-white rounded-lg shadow">
                                <div class="flex items-center justify-between">
                                    <p class="text-lg font-semibold">
                                        <span class="text-gray-900">Akanbi Lawal</span>
                                        <span class="text-gray-600">wrote</span>
                                    </p>
                                    <div class="flex items-center">
                                        <span class="text-xs text-gray-600">Yesterday at 7:24 AM</span>
                                        <img class="ml-5 h-8 w-8 rounded-full object-cover" src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=4&w=144&q=80">
                                    </div>
                                </div>
                                <div class="mt-6 text-gray-800 text-sm">
                                    <p>
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                                    </p>
                                    <p class="mt-4">
                                        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                    </p>
                                    <p class="mt-4 font-semibold text-gray-900">Akanbi Lawal</p>
                                    <p>Customer Service</p>
                                </div>

                            </article>

                            <div style=" background-color: rgba(0, 0, 0, 0.8)" class="fixed z-40 top-0 right-0 left-0 bottom-0 h-full w-full" x-show.transition.opacity="openEventModal">
                                <div class="p-4 max-w-xl mx-auto relative  left-0 right-0 overflow-hidden mt-24">
                                    <div class="shadow absolute right-0 top-0 w-10 h-10 rounded-full bg-white text-gray-500 hover:text-gray-800 inline-flex items-center justify-center cursor-pointer" x-on:click="openEventModal = !openEventModal">
                                        <svg class="fill-current w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path
                            d="M16.192 6.344L11.949 10.586 7.707 6.344 6.293 7.758 10.535 12 6.293 16.242 7.707 17.656 11.949 13.414 16.192 17.656 17.606 16.242 13.364 12 17.606 7.758z" />
                        </svg>
                                    </div>


                                    <div class="shadow  rounded-lg bg-white overflow-hidden w-full block p-8">

                                        <h2 class="font-bold text-2xl mb-6 text-gray-800 border-b pb-2">New message</h2>

                                        <div class="mb-4">
                                            <label class="text-gray-800 block mb-1 font-bold text-sm tracking-wide">To: </label>
                                            <input class="bg-gray-200 appearance-none border-2 border-gray-200 rounded-lg w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-blue-500" type="text" x-model="user">
                                        </div>

                                        <div class="mb-4">
                                            <label class="text-gray-800 block mb-1 font-bold text-sm tracking-wide">Object</label>
                                            <input class="bg-gray-200 appearance-none border-2 border-gray-200 rounded-lg w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-blue-500" type="text" x-model="subject">
                                        </div>

                                        <div class="inline-block w-64 mb-4">
                                            <label class="text-gray-800 block mb-1 font-bold text-sm tracking-wide">Your contenue</label>
                                            <div class="relative">
                                                <textarea class="bg-gray-200 appearance-none border-2 border-gray-200 rounded-lg w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-blue-500" x-model="contenue"></textarea>

                                            </div>
                                        </div>

                                        <div class="mt-8 text-right">
                                            <button type="button" class="bg-white hover:bg-gray-100 text-gray-700 font-semibold py-2 px-4 border border-gray-300 rounded-lg shadow-sm mr-2" @click="openEventModal = !openEventModal">
                                              Cancel
                                            </button>
                                            <button type="button" class="bg-gray-800 hover:bg-gray-700 text-white font-semibold py-2 px-4 border border-gray-700 rounded-lg shadow-sm" @click="send_mess();openEventModal = !openEventModal">
                                              save message
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <article class="mt-3 px-10 pt-6 pb-8 bg-white rounded-lg shadow">
                                <div class="flex items-center justify-between">
                                    <p class="text-lg font-semibold">
                                        <span class="text-gray-900">Masturah Adam</span>
                                        <span class="text-gray-600">wrote</span>
                                    </p>
                                    <div class="flex items-center">
                                        <span class="text-xs text-gray-600">Yesterday at 7:24 AM</span>
                                        <img class="ml-5 h-8 w-8 rounded-full object-cover" src="https://images.unsplash.com/photo-1463453091185-61582044d556?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=3.5&w=144&q=60">
                                    </div>
                                </div>
                                <div class="mt-6 text-gray-800 text-sm">
                                    <p>
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                                    </p>
                                    <p class="mt-4">
                                        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                    </p>
                                    <p class="mt-4 font-semibold text-gray-900">Masturah Abiola</p>
                                    <p>Customer Service</p>
                                </div>
                            </article>
                            <div class="mt-6">
                                <textarea class="w-full px-3 py-2 text-gray-700 border rounded-lg focus:outline-none" rows="4" id="reply" placeholder="your message"></textarea>
                            </div>
                            <div class="mt-3">
                                <button type="button" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                                  send
                              </button>

                            </div>

                        </div>
                    </div>
                    </template>
                </main>
                {% endblock %}

            </div>
        </body>

        </html>



    </body>

</html>
{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>todo list</title>
    <link rel="stylesheet" href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/2.3.0/alpine.js" integrity="sha512-nIwdJlD5/vHj23CbO2iHCXtsqzdTTx3e3uAmpTm4x2Y8xCIFyWu4cSIV8GaGe2UNVq86/1h9EgUZy7tn243qdA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
    <div class="h-screen flex overflow-hidden bg-white">
        <!-- Off-canvas menu for mobile, show/hide based on off-canvas menu state. -->
        <div class="fixed inset-0 flex z-40 lg:hidden" role="dialog" aria-modal="true">
      
          <div class="fixed inset-0 bg-gray-600 bg-opacity-75" aria-hidden="true"></div>
      
          <!--
            Off-canvas menu, show/hide based on off-canvas menu state.
      
            Entering: "transition ease-in-out duration-300 transform"
              From: "-translate-x-full"
              To: "translate-x-0"
            Leaving: "transition ease-in-out duration-300 transform"
              From: "translate-x-0"
              To: "-translate-x-full"
          -->
          <div class="relative flex-1 flex flex-col max-w-xs w-full bg-white focus:outline-none">
      
            <div class="absolute top-0 right-0 -mr-12 pt-2">
              <button type="button" class="ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
                <span class="sr-only">Close sidebar</span>
                <!-- Heroicon name: outline/x -->
                <svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
      
            <div class="flex-1 h-0 pt-5 pb-4 overflow-y-auto">
              <div class="flex-shrink-0 flex items-center px-4">
                <img class="h-8 w-auto" src="https://tailwindui.com/img/logos/workflow-logo-indigo-600-mark-gray-900-text.svg" alt="Workflow">
              </div>
              <nav aria-label="Sidebar" class="mt-5">
                <div class="px-2 space-y-1">
                  <!-- Current: "bg-gray-100 text-gray-900", Default: "text-gray-600 hover:bg-gray-50 hover:text-gray-900" -->
                  <a href="http://127.0.0.1:8000/home/" class="bg-gray-100 text-gray-900 group flex items-center px-2 py-2 text-base font-medium rounded-md">
                    <!--
                      Heroicon name: outline/home
      
                      Current: "text-gray-500", Default: "text-gray-400 group-hover:text-gray-500"
                    -->
                    <svg class="text-gray-500 mr-4 h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                    </svg>
                    home
                  </a>
      
                  <a href="#" class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-base font-medium rounded-md">
                    <!-- Heroicon name: outline/calendar -->
                    <svg class="text-gray-400 group-hover:text-gray-500 mr-4 h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                    Calendar
                  </a>
      
                  <a href="#" class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-base font-medium rounded-md">
                    <!-- Heroicon name: outline/user-group -->
                    <svg class="text-gray-400 group-hover:text-gray-500 mr-4 h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                    Teams
                  </a>
      
                  <a href="#" class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-base font-medium rounded-md">
                    <!-- Heroicon name: outline/search-circle -->
                    <svg class="text-gray-400 group-hover:text-gray-500 mr-4 h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Directory
                  </a>
      
                  <a href="#" class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-base font-medium rounded-md">
                    <!-- Heroicon name: outline/speakerphone -->
                    <svg class="text-gray-400 group-hover:text-gray-500 mr-4 h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z" />
                    </svg>
                    Announcements
                  </a>
      
                  <a href="#" class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-base font-medium rounded-md">
                    <!-- Heroicon name: outline/map -->
                    <svg class="text-gray-400 group-hover:text-gray-500 mr-4 h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
                    </svg>
                    Office Map
                  </a>
                </div>
              </nav>
            </div>
            <div class="flex-shrink-0 flex border-t border-gray-200 p-4">
              <a href="#" class="flex-shrink-0 group block">
                <div class="flex items-center">
                  <div>
                    <img class="inline-block h-10 w-10 rounded-full" src="https://images.unsplash.com/photo-1517365830460-955ce3ccd263?ixlib=rb-=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=8&w=256&h=256&q=80" alt="">
                  </div>
                  <div class="ml-3">
                    <p class="text-base font-medium text-gray-700 group-hover:text-gray-900">
                      Whitney Francis
                    </p>
                    <p class="text-sm font-medium text-gray-500 group-hover:text-gray-700">
                      View profile
                    </p>
                  </div>
                </div>
              </a>
            </div>
          </div>
      
          <div class="flex-shrink-0 w-14" aria-hidden="true">
            <!-- Force sidebar to shrink to fit close icon -->
          </div>
        </div>
      
        <!-- Static sidebar for desktop -->
        <div class="hidden lg:flex lg:flex-shrink-0">
          <div class="flex flex-col w-64">
            <!-- Sidebar component, swap this element with another sidebar if you like -->
            <div class="flex-1 flex flex-col min-h-0 border-r border-gray-200 bg-gray-100">
              <div class="flex-1 flex flex-col pt-5 pb-4 overflow-y-auto">
                <div class="flex items-center flex-shrink-0 px-4">
                  <img src="{% static 'home/pyforum_logo.png' %}" alt="pyforum logo">
      
                </div>
                <nav class="mt-5 flex-1" aria-label="Sidebar">
                  <div class="px-2 space-y-1">
                    <!-- Current: "bg-gray-200 text-gray-900", Default: "text-gray-600 hover:bg-gray-50 hover:text-gray-900" -->
                    <a href="http://127.0.0.1:8000" class="bg-gray-200 text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md">
                      <!--
                        Heroicon name: outline/home
      
                        Current: "text-gray-500", Default: "text-gray-400 group-hover:text-gray-500"
                      -->
                      <svg class="text-gray-500 mr-3 h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                      </svg>
                      home
                    </a>
      
                    <a href="http://127.0.0.1:8000/blog/" class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md">
                      <!-- Heroicon name: outline/calendar -->
                      <div class="text-gray-400 group-hover:text-gray-500 mr-3 h-6 w-6">
                          <i class="fas fa-blog fa-2x"></i>
                      </div>
                      blog
                    </a>
      
                    <a href="http://127.0.0.1:8000/forum/" class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md">
                      <!-- Heroicon name: outline/user-group -->
                      <div class="text-gray-400 group-hover:text-gray-500 mr-3 h-6 w-6" >
                          <i class="fab fa-forumbee fa-2x"></i>
                      </div>
                      forum
                    </a>
                    {% if not err %}
                    <a href="http://127.0.0.1:8000/messenger/" class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md">
                      <!-- Heroicon name: outline/search-circle -->
                      <div class="text-gray-400 group-hover:text-gray-500 mr-3 h-6 w-6">
                          <i class="fas fa-envelope fa-2x"></i>
                      </div>
      
                      messenger
                    </a>
      
                    <a href="http://127.0.0.1:8000/todolist" class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md">
                      <!-- Heroicon name: outline/speakerphone -->
                      <div class="text-gray-400 group-hover:text-gray-500 mr-3 h-6 w-6">
                          <i class="fas fa-list fa-2x"></i>
                      </div>
                      todo list
                    </a>
      
                    <a href="http://127.0.0.1:8000/libphoto" class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md">
                      <!-- Heroicon name: outline/map -->
                      <div class="text-gray-400 group-hover:text-gray-500 mr-3 h-6 w-6">
                          <i class="far fa-images fa-2x"></i>
                      </div>
                      library photos
                    </a>
                    {% else %}
                    <a href="http://127.0.0.1:8000/home/login?next=/forum/" class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md">
                      <!-- Heroicon name: outline/map -->
                      <div class="text-gray-400 group-hover:text-gray-500 mr-3 h-6 w-6">
                          <i class="fas fa-sign-in-alt fa-2x"></i>
                      </div>
                      login
                    </a>
                    <a href="http://127.0.0.1:8000/home/signup" class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md">
                      <!-- Heroicon name: outline/map -->
                      <div class="text-gray-400 group-hover:text-gray-500 mr-3 h-6 w-6">
                          <img src="https://img.icons8.com/ios/50/000000/sign-up-in-calendar.png" class="w-6 h-6 fill-current" />
                      </div>
                      signup
                    </a>
                    {% endif %}
                  </div>
                </nav>
              </div>
              {% if not err %}
              <div class="flex-shrink-0 flex border-t border-gray-200 p-4">
      
                <a href="http://127.0.0.1:8000/home/profil/{{idname}}" class="flex-shrink-0 w-full group block">
                  <div class="flex items-center">
                    <div>
                      <img class="inline-block h-8 w-8 rounded-full" src="{{user.profil.img_profil.url}}" alt="">
                    </div>
                    <div class="ml-3">
                      <p class="text-sm font-medium text-gray-700 group-hover:text-gray-900">
                          {{user.username}}
                      </p>
                      <p class="text-xs font-medium text-gray-500 group-hover:text-gray-700">
                        View profile
                      </p>
                    </div>
                  </div>
                </a>
              </div>
              {% endif %}
            </div>
          </div>
        </div>
        <div class="flex flex-col min-w-0 flex-1 overflow-hidden">
          <div class="lg:hidden">
            <div class="flex items-center justify-between bg-gray-50 border-b border-gray-200 px-4 py-1.5">
              <div>
                <img class="h-8 w-auto" src="https://tailwindui.com/img/logos/workflow-mark-indigo-600.svg" alt="Workflow">
              </div>
              <div>
                <button type="button" class="-mr-3 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900">
                  <span class="sr-only">Open sidebar</span>
                  <!-- Heroicon name: outline/menu -->
                  <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                  </svg>
                </button>
              </div>
            </div>
          </div>
          <div class="flex-1 relative z-0 flex overflow-hidden">
            <main class="flex-1 relative z-0 overflow-y-auto focus:outline-none xl:order-last">
                <div class="antialiased sans-serif bg-gray-100 h-screen">
                    <div x-data="app()" x-init="[initDate(), getNoOfDays()]" x-cloak>
                        <div class="container mx-auto px-4 py-2 md:py-24">
                              
                            <!-- <div class="font-bold text-gray-800 text-xl mb-4">
                                Schedule Tasks
                            </div> -->
                
                            <div class="bg-white rounded-lg shadow overflow-hidden">
                
                                <div class="flex items-center justify-between py-2 px-6">
                                    <div>
                                        <span x-text="MONTH_NAMES[month]" class="text-lg font-bold text-gray-800"></span>
                                        <span x-text="year" class="ml-1 text-lg text-gray-600 font-normal"></span>
                                    </div>
                                    <div class="border rounded-lg px-1" style="padding-top: 2px;">
                                        <button 
                                            type="button"
                                            class="leading-none rounded-lg transition ease-in-out duration-100 inline-flex cursor-pointer hover:bg-gray-200 p-1 items-center" 
                                        
                                            @click="month--; getNoOfDays()">
                                            <svg class="h-6 w-6 text-gray-500 inline-flex leading-none"  fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                                            </svg>  
                                        </button>
                                        <div class="border-r inline-flex h-6"></div>		
                                        <button 
                                            type="button"
                                            class="leading-none rounded-lg transition ease-in-out duration-100 inline-flex items-center cursor-pointer hover:bg-gray-200 p-1" 
                                            
                                            
                                            @click="month++; getNoOfDays()">
                                            <svg class="h-6 w-6 text-gray-500 inline-flex leading-none"  fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                            </svg>									  
                                        </button>
                                    </div>
                                </div>	
                
                                <div class="-mx-1 -mb-1">
                                    <div class="flex flex-wrap" style="margin-bottom: -40px;">
                                        <template x-for="(day, index) in DAYS" :key="index">	
                                            <div style="width: 14.26%" class="px-2 py-2">
                                                <div
                                                    x-text="day" 
                                                    class="text-gray-600 text-sm uppercase tracking-wide font-bold text-center"></div>
                                            </div>
                                        </template>
                                    </div>
                
                                    <div class="flex flex-wrap border-t border-l">
                                        <template x-for="blankday in blankdays">
                                            <div 
                                                style="width: 14.28%; height: 120px"
                                                class="text-center border-r border-b px-4 pt-2"	
                                            ></div>
                                        </template>	
                                        <template x-for="(date, dateIndex) in no_of_days" :key="dateIndex">	
                                            <div style="width: 14.28%; height: 120px" class="px-4 pt-2 border-r border-b relative">
                                                <div
                                                    @click="showEventModal(date)"
                                                    x-text="date"
                                                    class="inline-flex w-6 h-6 items-center justify-center cursor-pointer text-center leading-none rounded-full transition ease-in-out duration-100"
                                                    :class="{'bg-blue-500 text-white': isToday(date) == true, 'text-gray-700 hover:bg-blue-200': isToday(date) == false }"	
                                                ></div>
                                                <div style="height: 80px;" class="overflow-y-auto mt-1">
                                                    <!-- <div 
                                                        class="absolute top-0 right-0 mt-2 mr-2 inline-flex items-center justify-center rounded-full text-sm w-6 h-6 bg-gray-700 text-white leading-none"
                                                        x-show="events.filter(e => e.event_date === new Date(year, month, date).toDateString()).length"
                                                        x-text="events.filter(e => e.event_date === new Date(year, month, date).toDateString()).length"></div> -->
                
                                                    <template x-for="event in events.filter(e => new Date(e.event_date).toDateString() ===  new Date(year, month, date).toDateString() )">	
                                                        <div
                                                            class="px-2 py-1 rounded-lg mt-1 overflow-hidden border"
                                                            :class="{
                                                                'border-blue-200 text-blue-800 bg-blue-100': event.event_theme === 'blue',
                                                                'border-red-200 text-red-800 bg-red-100': event.event_theme === 'red',
                                                                'border-yellow-200 text-yellow-800 bg-yellow-100': event.event_theme === 'yellow',
                                                                'border-green-200 text-green-800 bg-green-100': event.event_theme === 'green',
                                                                'border-purple-200 text-purple-800 bg-purple-100': event.event_theme === 'purple'
                                                            }"
                                                        >
                                                            <div  class="inline text-sm truncate leading-tight"><span x-text="event.event_title" class="float-left" ></span><button class="float-right  hover:cursor-auto" @click="del(event.id)">&times;</button></div>
                                                        </div>
                                                    </template>
                                                </div>
                                            </div>
                                        </template>
                                    </div>
                                </div>
                            </div>
                        </div>
                
                        <!-- Modal -->
                        <div style=" background-color: rgba(0, 0, 0, 0.8)" class="fixed z-40 top-0 right-0 left-0 bottom-0 h-full w-full" x-show.transition.opacity="openEventModal">
                            <div class="p-4 max-w-xl mx-auto relative absolute left-0 right-0 overflow-hidden mt-24">
                                <div class="shadow absolute right-0 top-0 w-10 h-10 rounded-full bg-white text-gray-500 hover:text-gray-800 inline-flex items-center justify-center cursor-pointer"
                                    x-on:click="openEventModal = !openEventModal">
                                    <svg class="fill-current w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                        <path
                                            d="M16.192 6.344L11.949 10.586 7.707 6.344 6.293 7.758 10.535 12 6.293 16.242 7.707 17.656 11.949 13.414 16.192 17.656 17.606 16.242 13.364 12 17.606 7.758z" />
                                    </svg>
                                </div>
                
                                <div class="shadow w-full rounded-lg bg-white overflow-hidden w-full block p-8">
                                    
                                    <h2 class="font-bold text-2xl mb-6 text-gray-800 border-b pb-2">Add Event Details</h2>
                                 
                                    <div class="mb-4">
                                        <label class="text-gray-800 block mb-1 font-bold text-sm tracking-wide">Event title</label>
                                        <input class="bg-gray-200 appearance-none border-2 border-gray-200 rounded-lg w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-blue-500" type="text" x-model="event_title">
                                    </div>
                                    
                
                                    <div class="mb-4">
                                        <label class="text-gray-800 block mb-1 font-bold text-sm tracking-wide">Event date</label>
                                        <input class="bg-gray-200 appearance-none border-2 border-gray-200 rounded-lg w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-blue-500" type="text" x-model="event_date" readonly>
                                    </div>
                
                                    <div class="inline-block w-64 mb-4">
                                        <label class="text-gray-800 block mb-1 font-bold text-sm tracking-wide">Select a theme</label>
                                        <div class="relative">
                                            <select @change="event_theme = $event.target.value;" x-model="event_theme" class="block appearance-none w-full bg-gray-200 border-2 border-gray-200 hover:border-gray-500 px-4 py-2 pr-8 rounded-lg leading-tight focus:outline-none focus:bg-white focus:border-blue-500 text-gray-700">
                                                    <template x-for="(theme, index) in themes">
                                                        <option :value="theme.value" x-text="theme.label"></option>
                                                    </template>
                                                
                                            </select>
                                            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                                            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                                            </div>
                                        </div>
                                    </div>
                 
                                    <div class="mt-8 text-right">
                                        <button type="button" class="bg-white hover:bg-gray-100 text-gray-700 font-semibold py-2 px-4 border border-gray-300 rounded-lg shadow-sm mr-2" @click="openEventModal = !openEventModal">
                                            Cancel
                                        </button>	
                                        <button type="button" class="bg-gray-800 hover:bg-gray-700 text-white font-semibold py-2 px-4 border border-gray-700 rounded-lg shadow-sm" @click="addEvent()">
                                            Save Event
                                        </button>	
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- /Modal -->
                    </div>
                
                  </div>
                  
                  <script>
                  const MONTH_NAMES = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
                        const DAYS = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                        
                        function app() {
                            return {
                                month: '',
                                year: '',
                                
                                no_of_days: [],
                                blankdays: [],
                                days: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
                
                                events:  {{liste|safe}},

                                event_title: '',
                                event_date: '',
                                event_theme: 'blue',
                
                                themes: [
                                    {
                                        value: "blue",
                                        label: "Blue Theme"
                                    },
                                    {
                                        value: "red",
                                        label: "Red Theme"
                                    },
                                    {
                                        value: "yellow",
                                        label: "Yellow Theme"
                                    },
                                    {
                                        value: "green",
                                        label: "Green Theme"
                                    },
                                    {
                                        value: "purple",
                                        label: "Purple Theme"
                                    }
                                ],
                                del(id) {
                                  var index=0;
                                    for (var i=0;i<this.events.length;i++) {
                                      if(this.events[i].id==id) delete this.events[i]
                                    }
                                    console.log(this.events.length)
                                    delete this.events[index]
                                    fetch("http://127.0.0.1:8000/todolist/delete/", {
                                      method: "POST",
                                      headers: [
                                            ["Content-Type", "application/json"],
                                            ["Content-Type", "text/plain"]
                                        ],
                                      body: JSON.stringify({id: id})
                                    })
                                    
                                },
                                
                                openEventModal: false,
                
                                initDate() {
                                    //this.events = this.get_data()
                                    let today = new Date();
                                    this.month = today.getMonth();
                                    this.year = today.getFullYear();
                                    this.datepickerValue = new Date(this.year, this.month, today.getDate()).toDateString();
                                },
                
                                isToday(date) {
                                    const today = new Date();
                                    const d = new Date(this.year, this.month, date);
                
                                    return today.toDateString() === d.toDateString() ? true : false;
                                },
                
                                showEventModal(date) {
                                    // open the modal
                                    this.openEventModal = true;
                                    this.event_date = new Date(this.year, this.month, date).toDateString();
                                },
                
                                addEvent() {
                                    if (this.event_title == '') {
                                        return;
                                    }
                                    var json = {
                                        event_date: this.event_date,
                                        event_title: this.event_title,
                                        event_theme: this.event_theme
                                    }
                                    this.events.push(json);
                                    this.save_data(this.event_date, this.event_title, this.event_theme)
                
                                    console.log(this.events);
                
                                    // clear the form data
                                    this.event_title = '';
                                    this.event_date = '';
                                    this.event_theme = 'blue';
                
                                    //close the modal
                                    this.openEventModal = false;
                                },
                                save_data(date, title, theme) {
                                    fetch(`http://127.0.0.1:8000/todolist/new/`, {
                                        method: "POST",
                                        headers: [
                                            ["Content-Type", "application/json"],
                                            ["Content-Type", "text/plain"]
                                        ],
                                        body: JSON.stringify({"date": date, "theme":theme,"title":title})
                                    })
                                    .then(function(res){ console.log(res) } )
                                    .catch(function(res){ console.log(res) })
                                },
                
                                getNoOfDays() {
                                    if (this.month >= 12) {
                                        this.month -= 12
                                        this.year+=1 
                                    }
                                    if(this.month < 0) {
                                        this.month += 12
                                        this.year-=1
                                    }
                                    let daysInMonth = new Date(this.year, this.month + 1, 0).getDate();
                
                                    // find where to start calendar day of week
                                    let dayOfWeek = new Date(this.year, this.month).getDay();
                                    let blankdaysArray = [];
                                    for ( var i=1; i <= dayOfWeek; i++) {
                                        blankdaysArray.push(i);
                                    }
                
                                    let daysArray = [];
                                    for ( var i=1; i <= daysInMonth; i++) {
                                        daysArray.push(i);
                                    }
                                    
                                    this.blankdays = blankdaysArray;
                                    this.no_of_days = daysArray;
                                }
                            }
                        }
                  </script>
          
          
            </main>
            
          </div>
        </div>
      </div>
    
</body>
</html>